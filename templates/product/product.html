{% extends 'product/base-forms.html' %}
{% load static %}
{% block page_title %}Карточка Товара{% endblock %}
{% block content %}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Custom elements start here -->
    <section class="content" id="app">
        <div class="container-fluid">
            <!-- Info boxes -->

            <!-- /.row -->
            <div class="row pt-2">
                <div class="col-md-6">
                    <form action="." id="basic">
                        <div class="card card-primary">
                            <div class="card-header">
                                <h3 class="card-title">Основные параметры</h3>
                            </div>
                            <div class="card-body">
                                <label for="productName">Название Зачасти</label>
                                <input v-model="part.name" class="form-control form-control-sm product-main-name"
                                    type="text" id="productName" placeholder="Наименование" value="{{ object.name }}">
                                <br>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="productId">ID запчасти
                                            #<span id="mainId" token="{{ object.id }}">{{ part.id }}</span></label>
                                        <input v-model="part.id" class="form-control form-control-sm" type="text"
                                            id="productId" placeholder="ID" value={{ object.id }} disabled>
                                    </div>
                                    <div class="col-6">
                                        <label for="productUnit">Ед Изм</label>
                                        <v-select label="unit_name" :options="selectUnitList" v-model="selectedUnit">
                                        </v-select>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="productGroup">Страна</label>
                                        <input v-model="part.car_model.carmake.country.country"
                                            class="form-control form-control-sm" type="text" id="productCountry"
                                            placeholder="Страна" disabled>
                                    </div>
                                    <div class="col-6">
                                        <label for="productCatNumber">Каталожный номер</label>
                                        <input v-model="part.cat_number" class="form-control form-control-sm"
                                            type="text" id="productCatNumber" placeholder="Каталожный номер">
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="productGroup">Группа запчасти</label>
                                        <input v-model="part.category" class="form-control form-control-sm" type="text"
                                            id="productGroup" placeholder="Группа" disabled>
                                    </div>
                                    <div class="col-6">
                                        <label for="productBrand">Бренд</label>
                                        <v-select label="brand" :options="selectBrandList" v-model="selectedBrand">
                                        </v-select>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="make">Марка Машины</label>
                                        <input v-model="part.car_model.carmake.name"
                                            class="form-control form-control-sm" type="text" id="make"
                                            placeholder="Марка" disabled>
                                    </div>
                                    <div class="col-6">
                                        <label for="model">Модель Машины</label>
                                        <v-select label="name" :options="selectCarModelList" v-model="selectedCarModel">
                                        </v-select>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-6">
                                        <label for="engine">Двигатель</label>
                                        <v-select label="name" :options="selectCarEngineList"
                                            v-model="selectedCarEngine">
                                        </v-select>
                                    </div>
                                    <div class="col-6">
                                        <label for="1cid">1C id</label>
                                        <input v-model="part.one_c_id" class="form-control form-control-sm" type="text"
                                            id="1cid" placeholder="1C ID">
                                    </div>
                                </div>
                                <br>
                                <div class="row mt-2">
                                    <div class="col-6">
                                        <div class="custom-control custom-switch">
                                            <input v-model="part.active" type="checkbox" class="custom-control-input"
                                                id="isActive" checked>
                                            <label class="custom-control-label" for="isActive">Активный</label>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <button @click.prevent="editPart"
                                            class="btn btn-primary btn-xs float-right">Сохранить</button>
                                    </div>
                                </div>
                            </div>
                            <!-- /.card-body -->
                        </div>
                    </form>
                </div>
                <div class="col-md-6">
                    <div class="card card-primary card-tabs">
                        <div class="card-header p-0 pt-1">
                            <ul class="nav nav-tabs" id="custom-tabs-one-tab-photo" role="tablist">
                                <li class="nav-item">
                                    <a @click="getImage('{{ object.id }}')" class="nav-link active"
                                        id="custom-tabs-one-home-tab-photo" data-toggle="pill"
                                        href="#custom-tabs-one-photo" role="tab"
                                        aria-controls="custom-tabs-one-home-photo" aria-selected="true">Фото и Видео</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="custom-tabs-one-settings-tab" data-toggle="pill"
                                        href="#custom-tabs-one-settings" role="tab"
                                        aria-controls="custom-tabs-one-settings" aria-selected="false">Загрузить
                                        Фото</a>
                                </li>
                                <li class="nav-item">
                                    <a @click="getVideo('{{ object.id }}')" class="nav-link"
                                        id="custom-tabs-one-video-tab" data-toggle="pill" href="#custom-tabs-one-video"
                                        role="tab" aria-controls="custom-tabs-one-settings"
                                        aria-selected="false">Видео</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="custom-tabs-one-tabContent-photo">
                                <div class="tab-pane fade show active" id="custom-tabs-one-photo" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-photo-tab">
                                    <div class="row bottom-border">
                                        <div class="product-image-container">
                                            <div v-for="(prod_img,i) in productImages" class="product-image-item">
                                                <img :src="prod_img.img150" class="product-image-image">
                                                <div class="row product-image-footer">
                                                    <div class="col-6">
                                                        <div class="custom-control custom-radio">
                                                            <input :checked="i == mainImage"
                                                                class="custom-control-input" type="radio"
                                                                :id="'customRadio1-' + i " name="customRadio"
                                                                :value="prod_img.id">
                                                            <label :for="'customRadio1-' + i"
                                                                class="custom-control-label">Main</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-6">
                                                        <a @click.prevent="deleteImage(prod_img.id)" href="#"
                                                            class=""><span class="float-right"
                                                                style="font-size: 1rem; color: #f012be;"><i
                                                                    class="far fa-trash-alt"></i></span></a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row pt-2">
                                        <div class="col-12">
                                            <div class="product-video-container">
                                                <div class="embed-responsive embed-responsive-16by9 product-video-item">
                                                    <iframe class="embed-responsive-item"
                                                        src="https://www.youtube.com/embed/jJR2r7w3l5o" frameborder="0"
                                                        allowfullscreen=""></iframe>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="custom-tabs-one-settings" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-settings-tab">
                                    <div class="mb-3">
                                        <form enctype="multipart/form-data">
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label for="exampleInputFile">Выбрать файл</label>
                                                        <div class="input-group">
                                                            <div class="custom-file">
                                                                <input @change="onFileSelected" type="file" multiple
                                                                    class="custom-file-input" id="exampleInputFile">
                                                                <label class="custom-file-label"
                                                                    for="exampleInputFile">Фото</label>
                                                            </div>
                                                            <div class="input-group-append">
                                                                <span @click.prevent="uploadImage"
                                                                    class="input-group-text" id="">Сохранить</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div v-if="imageLoading">
                                                        <div class="load-spiner">
                                                            <img src="{% static 'images/load_primary.gif' %}" alt="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="custom-tabs-one-video" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-video-tab">
                                    <ul class="product-videos-ul">
                                        <li v-for="(video, j) in productVideos">
                                            <span @click="deleteVideo(video.id)" class="product-video-icon">
                                                <i class="far fa-trash-alt"></i>
                                            </span>
                                            <span class="product-video-thumbnails">
                                                <a :href="video.url" class="product-video-a" target="_blank"><img
                                                        :src="'https://img.youtube.com/vi/' + video.youtube_id + '/default.jpg'"></a>
                                            </span>
                                            <span class="product-video-url">
                                                { video.url }
                                            </span>
                                        </li>
                                    </ul>
                                    <div>
                                        <div class="input-group input-group-sm mb-2">
                                            <input v-model="productVideoUrl" type="text"
                                                class="form-control product-vieo-input">
                                            <span class="input-group-append">
                                                <button @click.prevent="addVideo" type="button"
                                                    class="btn btn-info btn-flat">Сохранить!</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- /.card -->
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-6">
                    <div class="card card-primary card-tabs">
                        <div class="card-header p-0 pt-1">
                            <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="custom-tabs-one-home-tab" data-toggle="pill"
                                        href="#custom-tabs-one-home" role="tab" aria-controls="custom-tabs-one-home"
                                        aria-selected="true">Атрибуты</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="custom-tabs-one-profile-tab" data-toggle="pill"
                                        href="#custom-tabs-one-profile" role="tab"
                                        aria-controls="custom-tabs-one-profile" aria-selected="false">Описание</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="custom-tabs-one-messages-tab" data-toggle="pill"
                                        href="#custom-tabs-one-messages" role="tab"
                                        aria-controls="custom-tabs-one-messages" aria-selected="false">Messages</a>
                                </li>
                            </ul>
                        </div>
                        <div class="card-body">
                            <div class="tab-content" id="custom-tabs-one-tabContent">
                                <div class="tab-pane fade show active" id="custom-tabs-one-home" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-home-tab">
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="1attr1">Атрибут Один</label>
                                            <input class="form-control form-control-sm" type="text"
                                                placeholder=".form-control-sm" id="1attr1">
                                        </div>
                                        <div class="col-6">
                                            <label for="1attr_val1">Значение Один</label>
                                            <input class="form-control form-control-sm" type="text"
                                                placeholder=".form-control-sm" id="1arrt_val1">
                                        </div>
                                    </div>
                                    <br>
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="1attr2">Атрибут Один</label>
                                            <input class="form-control form-control-sm" type="text"
                                                placeholder=".form-control-sm" id="1attr2">
                                        </div>
                                        <div class="col-6">
                                            <label for="1attr_val2">Значение Один</label>
                                            <input class="form-control form-control-sm" type="text"
                                                placeholder=".form-control-sm" id="1arrt_val2">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-6">
                                            <label for="1attr3">Атрибут Один</label>
                                            <input class="form-control form-control-sm" type="text"
                                                placeholder=".form-control-sm" id="1attr3">
                                        </div>
                                        <div class="col-6">
                                            <label for="1attr_val3">Значение Один</label>
                                            <input class="form-control form-control-sm" type="text"
                                                placeholder=".form-control-sm" id="1arrt_val3">
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="custom-tabs-one-profile" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-profile-tab">
                                    <div class="mb-3">
                                        <textarea class="textarea" placeholder="Добавте описание запчасти"
                                            style="width: 100%; height: 200px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;">
                                            Morbi turpis dolor, vulputate vitae felis non, tincidunt congue mauris.
                                            Phasellus volutpat augue id mi placerat mollis. Vivamus faucibus eu massa
                                            eget condimentum. Fusce nec hendrerit sem, ac tristique nulla. Integer
                                            vestibulum orci odio. Cras nec augue ipsum. Suspendisse ut velit
                                            condimentum, mattis urna a, malesuada nunc. Curabitur eleifend facilisis
                                            velit finibus tristique. Nam vulputate, eros non luctus efficitur, ipsum
                                            odio volutpat massa, sit amet sollicitudin est libero sed ipsum. Nulla
                                            lacinia, ex vitae gravida fermentum, lectus ipsum gravida arcu, id fermentum
                                            metus arcu vel metus. Curabitur eget sem eu risus tincidunt eleifend ac
                                            ornare magna.
                                        </textarea>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="custom-tabs-one-messages" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-messages-tab">
                                    Morbi turpis dolor, vulputate vitae felis non, tincidunt congue mauris.
                                    Phasellus volutpat augue id mi placerat mollis. Vivamus faucibus eu massa
                                    eget condimentum. Fusce nec hendrerit sem, ac tristique nulla. Integer
                                    vestibulum orci odio. Cras nec augue ipsum. Suspendisse ut velit
                                    condimentum, mattis urna a, malesuada nunc. Curabitur eleifend facilisis
                                    velit finibus tristique. Nam vulputate, eros non luctus efficitur, ipsum
                                    odio volutpat massa, sit amet sollicitudin est libero sed ipsum. Nulla
                                    lacinia, ex vitae gravida fermentum, lectus ipsum gravida arcu, id fermentum
                                    metus arcu vel metus. Curabitur eget sem eu risus tincidunt eleifend ac
                                    ornare magna.
                                </div>
                                <!-- <div class="tab-pane fade" id="custom-tabs-one-settings" role="tabpanel"
                                    aria-labelledby="custom-tabs-one-settings-tab">
                                    Pellentesque vestibulum commodo nibh nec blandit. Maecenas neque magna,
                                    iaculis tempus turpis ac, ornare sodales tellus. Mauris eget blandit dolor.
                                    Quisque tincidunt venenatis vulputate. Morbi euismod molestie tristique.
                                    Vestibulum consectetur dolor a vestibulum pharetra. Donec interdum placerat
                                    urna nec pharetra. Etiam eget dapibus orci, eget aliquet urna. Nunc at
                                    consequat diam. Nunc et felis ut nisl commodo dignissim. In hac habitasse
                                    platea dictumst. Praesent imperdiet accumsan ex sit amet facilisis.
                                </div> -->
                            </div>
                        </div>
                        <!-- /.card -->
                    </div>
                </div>
                <div class="col-6">
                    <!-- Custom tabs (Charts with tabs)-->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-pie mr-1"></i>
                                Sales
                            </h3>
                            <div class="card-tools">
                                <ul class="nav nav-pills ml-auto">
                                    <li class="nav-item">
                                        <a class="nav-link active" href="#revenue-chart" data-toggle="tab">Area</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#sales-chart" data-toggle="tab">Donut</a>
                                    </li>
                                </ul>
                            </div>
                        </div><!-- /.card-header -->
                        <div class="card-body">
                            <div class="tab-content p-0">
                                <!-- Morris chart - Sales -->
                                <div class="chart tab-pane active" id="revenue-chart"
                                    style="position: relative; height: 300px;">
                                    <canvas id="revenue-chart-canvas" height="300" style="height: 300px;"></canvas>
                                </div>
                                <div class="chart tab-pane" id="sales-chart" style="position: relative; height: 300px;">
                                    <canvas id="sales-chart-canvas" height="300" style="height: 300px;"></canvas>
                                </div>
                            </div>
                        </div><!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                </div>
            </div>
        </div>
    </section>
    <!-- /.Custom elements ends here -->
</div>
<!-- /.content-wrapper -->
{% endblock content %}
{% block js %}
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="{% static 'dist/js/pages/dashboard.js' %}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{% static 'dist/js/demo.js' %}"></script>
<script>
    $(function () {
        // Summernote
        $('.textarea').summernote()
    });
    // In your Javascript (external .js resource or <script> tag)
    // $(document).ready(function () {
    //     $('.js-example-basic-single').select2({
    //         tags: true
    //     });
    // });
</script>
<script src="{% static 'js/axios.min.js' %}"></script>
<script src="{% static 'js/service_api.js' %}"></script>
<script src="{% static 'js/product_detail_jquery.js' %}"></script>
<script src="{% static 'js/product_detail_vue.js' %}"></script>
{% endblock %}